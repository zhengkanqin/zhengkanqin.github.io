<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
    <title>game</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://at.alicdn.com/t/c/font_4517633_51fsad2ig2q.js"></script>
    <link rel="stylesheet" href="https://a.amap.com/jsapi_demos/static/demo-center/css/demo-center.css" />
    <script src="https://webapi.amap.com/maps?v=2.0&key=ec334f27789fb7c641a7db923e768679&plugin=AMap.ToolBar"></script>
    <script src="https://webapi.amap.com/ui/1.1/main.js"></script>
</head>

<body>
    <div class="map-container" id="map-container"></div>
    <!-- å¼•å…¥é«˜å¾·åœ°å›¾çš„JavaScriptåº“ï¼Œå¹¶æŒ‡å®šéœ€è¦çš„æ’ä»¶ AMap.ToolBar -->
    <script>
        GoEvent = (id) => {
            uni.navigateTo({
                'url': "/pages/titleContent/titleContent?id=" + id
            })
        };
    </script>

    <script src="https://webapi.amap.com/ui/1.1/main.js"></script>
    <script>
        var map;
        var markers = [];
        var infoMarkers = []; // ç”¨äºå­˜å‚¨ä¿¡æ¯æ¡†çš„æ ‡è®°æ•°ç»„
    </script>
    <script>
        // åˆå§‹åŒ–åœ°å›¾
        var map = new AMap.Map('map-container', {
            zoom: 15,
            minZoom: 13, // è®¾ç½®åœ°å›¾å…è®¸çš„æœ€å°ç¼©æ”¾çº§åˆ«ä¸º 13
            maxZoom: 20, // è®¾ç½®åœ°å›¾å…è®¸çš„æœ€å¤§ç¼©æ”¾çº§åˆ«ä¸º 20
            center: [114.371713, 30.542335],
            resizeEnable: true,
            mapStyle: "amap://styles/whitesmoke" // åœ°å›¾æ ·å¼
        });
    </script>
    <script>
        const dataGame = {}
        Object.defineProperty(dataGame, 'property', {
            get: function () {
                console.log('Getting property value');
                return this._property;
            },
            set: function (value) {
                console.log('Setting property value to ' + value);
                this._property = value;
                loadgame(value);
            }
        });
    </script>
    <script>
        var eventData =
{
    "code": "0",
    "msg": null,
    "data": [
        {
            "gid": 1,
            "locationX": 114.3604976343629,
            "locationY": 30.545550260611407,
            "userId": 1,
            "title": "åœ¨å°",
            "content": "ä½ çš„",
            "timestamp": [
                2024,
                4,
                15,
                15,
                30,
                46,
                45862000
            ],
            "type": "å­¦æœ¯",
            "tag": "[å¥½å‹,æœ€è¿‘]",
            "images": "[]",
            "payment": 1,
            "deadline": [
                2024,
                5,
                15,
                0,
                4,
                12
            ],
            "participantLimit": null,
            "cutDown": null,
            "publisher": null,
            "like": 0,
            "collect": 0,
            "participant": 0,
            "likeAlready": false,
            "collectAlready": false,
            "participantAlready": false,
            "commentList": null,
            "participantList": null
        },
        {
            "gid": 2,
            "locationX": 114.36861368314976,
            "locationY": 30.538198696355693,
            "userId": 6,
            "title": "ç™½åˆèƒ–ğŸ¥²120æ–¤ä¹Ÿå¯ä»¥å¾ˆç¾çš„",
            "content": "å› ä¸ºå¯¹ç¾é£Ÿåçˆ±ï¼Œä»98æ–¤æ¶¨åˆ°äº†120ï¼Œ\nğŸ»ä»Cåˆ°E+ï¼Œè‡€å›´ä»85æ¶¨åˆ°95\n\nä»¥å‰æœ‰äººæ‰“å‹è¿‡æˆ‘ï¼Œè¯´æˆ‘æ˜¯èƒ–çº¸ï¼Œ\nä½†æˆ‘è§‰å¾—å¥³äººè¦éšé‡è€Œå®‰ï¼Œè‡ªå·±å–œæ¬¢è‡ªå·±å°±å¥½ï¼Œ\nèˆ’æœå¼€å¿ƒæœ€é‡è¦ï¼Œæ‰€ä»¥æˆ‘æ²¡æœ‰å¼ºè¿«è‡ªå·±å»å‡é‡\nè€Œæ˜¯æ‘’å¼ƒç˜¦æ†å„¿å®¡ç¾ï¼Œçˆ±ä¸Šç°åœ¨ä¸°è…´å¾®èƒ–çš„è‡ªå·±\nåè€Œæ›´çˆ±ç©¿åŒ…èº«è£™å­äº†\n\næ„¿å¤§å®¶æ— è®ºè‡ªå·±æ˜¯ä»€ä¹ˆæ ·ï¼Œåªæ´»åœ¨å½“ä¸‹\nè‡ªä¿¡å¼€å¿ƒåœ°è¿æ¥æ¯ä¸€å¤©ï¼Œ\nåªå’Œå–œæ¬¢è‡ªå·±è¿™æ¬¾çš„äººå»äº¤å¾€",
            "timestamp": [
                2024,
                4,
                15,
                15,
                33,
                20,
                312873000
            ],
            "type": "æ±‚åŠ©",
            "images": "[]",
            "payment": 10,
            "tag": "[å¥½å‹,æœ€è¿‘]",
            "deadline": null,
            "participantLimit": null,
            "cutDown": null,
            "publisher": null,
            "like": 0,
            "collect": 0,
            "participant": 0,
            "likeAlready": false,
            "collectAlready": false,
            "participantAlready": false,
            "commentList": null,
            "participantList": null
        },
        {
            "gid": 3,
            "locationX": 114.35564666267396,
            "locationY": 30.52807432000948,
            "userId": 2,
            "title": "æ­¦æ±‰å›¢å»ºï½œæ¨è8æ¬¾å¥½ç©çš„æ¡Œæ¸¸ï¼Œç–¯ç‹‚ä¸Šå¤´!!!",
            "content": "å®¤å†…è½°è¶´å›¢å»ºæ¡Œæ¸¸ç©ä»€ä¹ˆâ“\næ¡Œæ¸¸ç§ç±»åƒåƒä¸‡â€¼\nä¸è€—ä½“åŠ›ï¼Œæ°›å›´å€¼æ‹‰æ»¡ğŸ¤¯\n-\nğŸ«€å¾·å›½å¿ƒè„ç—…â—\nå¾·å›½å¿ƒè„ç—…æ˜¯ä¸€æ¬¾è€ƒéªŒååº”åŠ›çš„æ¡Œé¢æ¸¸æˆğŸ®\nåŒ…å«ä¸€å‰¯æ°´æœå¡ç‰Œâ•æŒ‰é“ƒ\nzuiç®€å•çš„ç©æ³•å°±æ˜¯â€œå‡‘æ°´æœâ€\nç©æ³•ï¼šç©å®¶è½®æµå‡ºç‰Œï¼Œæ¯ä½ç©å®¶å‡ºç‰Œæ—¶éœ€è¦†ç›–é¢å‰çš„å¡ç‰Œï¼Œå½“æ¡Œé¢ä¸Šå‡ºç°æ€»å’Œä¸º5çš„åŒç±»æ°´æœæ—¶ï¼Œé¦–å…ˆæŠ¢åˆ°é“ƒçš„äººå¯ä»¥è·å¾—æ¡Œé¢ä¸Šå…¨éƒ¨å¡ç‰Œï¼ŒæŒ‰é”™è€…æ¥å—æƒ©ç½šï¼Œç»“æŸæ—¶æ‰‹æ¡å¡ç‰Œæ•°é¢zuiå¤šçš„äººä¸ºè·èƒœè€…ã€‚\n-\nUNOä¼˜è¯º\nğŸ”¸æ¸¸ç©æ€§è´¨ï¼šç®€å•æ˜“ä¸Šæ‰‹ï¼Œé€‚åˆå°ç™½\nğŸ”¸é“å…·ï¼šä¼˜è¯ºä¸“ç”¨æ‰‘å…‹ç‰ŒğŸƒğŸƒğŸƒ\nğŸ”¸æ¸¸æˆè§„åˆ™ï¼šUNOç‰Œåˆ†ä¸‰ç±»ç‰Œ:æ•°å­—ç‰Œ(76å¼ )ã€åŠŸèƒ½ç‰Œ(24å¼ )ã€ä¸‡èƒ½ç‰Œ(8å¼ )ï¼Œåˆè®¡108å¼ ã€‚ã€Šä¸€èµ·UNOã€‹çš„æ¬¢ä¹åœºä¸­åŒ…å«åŒè‰²å…¨å‡º(åŠŸèƒ½ç‰Œ)ä¸åå¼¹ç‰Œ(ä¸‡èƒ½ç‰Œ)....\n-\nç‹¼äººæ€\nâ–ªæ¸¸ç©æ€§è´¨ï¼šçƒ§è„‘ã€é€»è¾‘æ¨ç†ï¼›ä¸é€‚åˆçº¯å°ç™½ç»„å±€ï¼Œå»ºè®®è€å¸¦æ–°\nâ–ªé“å…·ï¼šç‹¼äººæ€çº¸ç‰Œï¼ˆæˆ–ç™½çº¸â—»å†™è§’è‰²ä¹Ÿå¯ï¼‰\nâ–ªæ¸¸æˆç›®æ ‡ï¼š\nğŸ•µæ‘æ°‘ç›®æ ‡:ç™½å¤©çš„æ—¶å€™å¤„å†³æ‰€æœ‰çš„ç‹¼äºº\nğŸ‘ºç‹¼äººç›®æ ‡:é»‘å¤œçš„æ—¶å€™æ€æ­»æ‰€æœ‰çš„æ‘æ°‘\n-\nå¹²çªçœ¼\nğŸ”ºæ¸¸ç©æ€§è´¨ï¼šç®€å•æ˜“ä¸Šæ‰‹ï¼Œé€‚åˆå°ç™½\nğŸ”ºé“å…·ï¼šæ™®é€šæ‰‘å…‹ç‰Œ\nğŸ”ºæ¸¸æˆè§„åˆ™ï¼šâ€œå¤§ä¸€â€æ³•åˆ™ï¼Œå¯¹æ–¹å‡º3ï¼Œä½ åªèƒ½å‡º4æˆ–2ï¼›å¯¹æ–¹ä¸€å¯¹10ï¼Œä½ åªèƒ½ä¸€å¯¹Jæˆ–ä¸€å¯¹2ï¼›å¯¹æ–¹å‡º345ï¼ˆé¡ºå­ï¼‰ï¼Œä½ åªèƒ½å‡º456ï¼ˆé¡ºå­ï¼‰....\n-\nåœ°äº§å¤§äº¨\nğŸ”¹æ¸¸ç©æ€§è´¨ï¼šç®€å•æ˜“ä¸Šæ‰‹ï¼Œæ¬¢ä¹å·¨å¤š\nğŸ”¹é“å…·ï¼šå¤§å¯Œç¿çº¸ç‰Œ\nğŸ”¹æ¸¸æˆè§„çŸ©ï¼šæŠ•å‡ºéª°å­ï¼ŒæŒ‰ç…§éª°å­çš„æ­¥æ•°åœ¨åœ°å›¾ä¸Šå‰è¿›ã€‚\n-\n-å¤§å¯Œç¿\næˆ‘ä¸ç›¸ä¿¡æ²¡æœ‰äººä¸‹å°æ—¶å€™æ²¡æœ‰ç©è¿‡å¤§å¯Œç¿â€¼å¯’å‡æ¡èµ·æ¥çš„å¨±ä¹æ–¹å¼ğŸ˜…å‡­å€Ÿæˆ‘ä¸ƒå¯¸ä¸çƒ‚ä¹‹èˆŒè‹Ÿåˆ°ç»“å±€ï¼Œè™½ç„¶è¿˜æ˜¯è¾“äº†\nå¤§å¯Œç¿çš„ç³»åˆ—æœ‰å¾ˆå¤šï¼Œåæ¥å‘ç°è¿˜æœ‰å¤é£çš„ï¼Œåœ°å›¾æœ‰å†…åŠ¡åºœï¼Œè¿˜æœ‰å„å¼å®«æ®¿ã€‚\n-\n-é˜¿ç“¦éš†\nç±»ä¼¼äºç‹¼äººæ€ï¼Œä½†åˆä¸åŒäºç‹¼äººæ€ï¼Œç›¸è¾ƒäºç‹¼äººæ€æ›´ä¾§é‡äºäº’åŠ¨æ€§å’Œé€»è¾‘æ¨ç†å’Œåˆ†æèƒ½åŠ›ï¼Œè¿˜æœ‰ä¸€ä¸ªä¼˜ç‚¹å°±æ˜¯å®ƒæ²¡æœ‰mcï¼Œäººæ•°é™é¢ä¹Ÿæ¯”è¾ƒå°ã€‚\n-\n-å‰§æœ¬æ€\nå‰§æœ¬æ€ç®—æ˜¯ç ´å†°æ¸¸æˆçš„ä¸€å¤§é—¨ç±»å§ï¼Œå¯¹äºæˆç²¾ä»¬æ¥è¯´å¯è°“æ˜¯æ‰¾åˆ°äº†è‡ªå·±çš„èˆå°ï¼Œä¸è¿‡æœ‰ä¸ªè‡´å‘½ç‚¹æ˜¯æ¸¸æˆæ—¶é—´è¾ƒé•¿ï¼Œå¦‚æœé‡åˆ°çŒªé˜Ÿå‹å’Œä»£å…¥æ„Ÿå·®çš„mcä¼šä¸å¤ªè¿‡ç˜¾ï¼Œå¯¹äºæœ¬å­çš„è¦æ±‚ä¹Ÿæ¯”è¾ƒé«˜ï¼Œä¸è¿‡å¶å°”ä¹Ÿå¯ä»¥ç©ä¸€ä¸‹\n-\nğŸ’¯ï¼Œå–œæ¬¢æ¡Œæ¸¸çš„å°ä¼™ä¼´ä»¬èµ¶ç´§å‡†å¤‡èµ·æ¥å§ï¼\nå…³æ³¨æˆ‘ï¼Œæ›´å¤šè¶…å¤šå›¢å»ºæ–¹æ¡ˆç­‰ä½ æ¥\nå…¬å¸å›¢å»ºï¼Œå…è´¹ç­–åˆ’æ–¹æ¡ˆ+æ‰§è¡Œ\næœ‰é—®é¢˜ï¼Œç•™è¨€&ç›´æ¥ç§ä¿¡",
            "timestamp": [
                2024,
                4,
                15,
                15,
                41,
                47,
                612188000
            ],
            "type": "å¨±ä¹",
            "images": "[]",
            "tag": "[å¥½å‹,æœ€è¿‘]",
            "payment": null,
            "deadline": [
                2024,
                5,
                15,
                0,
                4,
                12
            ],
            "participantLimit": 1,
            "cutDown": null,
            "publisher": null,
            "like": 0,
            "collect": 0,
            "participant": 0,
            "likeAlready": false,
            "collectAlready": false,
            "participantAlready": false,
            "commentList": null,
            "participantList": null
        },
        {
            "gid": 4,
            "locationX": 114.35508693517221,
            "locationY": 30.535908751195763,
            "userId": 1,
            "title": "10æ¬¾ç»å…¸å¿…ç©çš„æ¡Œæ¸¸~æœ€åä¸€ç§æœ€å¥½ç©ï¼",
            "content": "ç»™å¤§å®¶ä»‹ç»10æ¬¾ç»å…¸å¿…ç©æ¡Œæ¸¸ï¼Œæœ€åä¸€ç§æœ€å¥½ç©ï¼\nã€Šä¸‡æ™ºç‰Œã€‹\nå¯ä»¥è¯´å¼é›†æ¢å¼å¡ç‰Œæ¸¸æˆçš„å§‹ç¥–ï¼Œä¹Ÿæ˜¯æå…¶å—æ¬¢è¿çš„å¡ç‰Œæ¸¸æˆä¹‹ä¸€ã€‚\n\nã€ŠUNOã€‹\nè¢«èª‰ä¸ºä¸–ç•Œä¸Šzuiå¥½ç©çš„çº¸ç‰Œã€‚å› ä¸ºç®€å•å¥½ä¸Šæ‰‹ï¼Œå…¶è®¾è®¡ä¹Ÿè½»ä¾¿ï¼Œæˆä¸ºå¾ˆå¤šäººèŒ¶ä½™é¥­åçš„ç»å…¸é¡¹ç›®ã€‚\n\nã€Šç‹¼äººæ€ã€‹\nå¾ˆå¤šäººå¯èƒ½ä¸çŸ¥é“ä»€ä¹ˆæ˜¯æ¡Œæ¸¸ï¼Œä½†æ˜¯è‚¯å®šç©è¿‡ç‹¼äººæ€ï¼Œæ˜¯ä¸€æ¬¾ç»å…¸çš„èº«ä»½æ¨ç†æ¡Œæ¸¸ã€‚\n\nã€Šé˜¿ç“¦éš†ã€‹\nè¢«ç§°ä¸ºâ€œäºŒä»£ç‹¼äººæ€â€ã€‚å› ä¸ºæ¯ä¸€ä¸ªè§’è‰²éƒ½å¾ˆæœ‰å‚ä¸æ„Ÿï¼Œæ‰€ä»¥ä¹Ÿå¤‡å—æ¬¢è¿ã€‚\n\nã€Šä¸‰å›½æ€ã€‹\nä¸‰å›½æ˜¯ä¸€ä¸ªæ°¸æ— ç©·å°½çš„è¯é¢˜ã€‚\n\nã€Šç’€ç’¨å®çŸ³ã€‹\næ¨æ–°åˆ©å™¨ï¼Œæœºåˆ¶ç®€å•ã€‚å› å…¶ç­–ç•¥æ€§å¾ˆå¼ºï¼Œè¿˜æœ‰å›½é™…èµ›äº‹ã€‚\n\nã€Šå¡å¦å²›ã€‹\næ¨æ–°å¿…ç©ç»å…¸æ¡Œæ¸¸ã€‚å¡å¦å²›è™½ç„¶æ˜¯ä¸€æ¬¾ç­–ç•¥æ€è€ƒçš„æ¡Œæ¸¸ï¼Œä½†æ˜¯å¯¹äºæ–°äººæ¥è¯´å¾ˆå‹å¥½ï¼ŒåŒæ—¶ä¸ä¹è¶£å‘³æ€§ï¼Œæ˜¯å¾ˆå¤šäººçš„å¯è’™æ¡Œæ¸¸ã€‚\n\nã€Šå¡å¡é¢‚ã€‹\nå¡å¡é¢‚æ˜¯ä¸€ä¸ªæœ‰ç€ä¼—å¤šæ‰©å±•çš„ç³»åˆ—æ¸¸æˆã€‚å…¶åœ°ä½ä¸äºšäºå¡å¦å²›ã€‚\n\nã€Šé‡å¡‘ç«æ˜Ÿã€‹\nå¾·ç­–ä¸­çš„ç»å…¸ï¼Œæ¸¸æˆèƒŒæ™¯å’Œç©æ³•èåˆçš„éå¸¸å¥½ã€‚æ€è€ƒé‡è¶³ï¼Œæ‹¿åˆ†æ‰‹æ®µå¤šæ ·ï¼Œäº’åŠ¨æ€§å°‘ä¸å¤ªå®¹æ˜“è¢«å¹²æ‰°ã€‚\n\nã€Šéº»å°†ã€‹\nè€å°‘å’¸å®œï¼Œé€¢å¹´è¿‡èŠ‚èšä¼šå¿…å¤‡é¡¹ç›®ã€‚\n\nä½ å¿ƒç›®ä¸­çš„æ¡Œæ¸¸Top10æ˜¯ï¼Ÿ\næ¥åŠ å…¥æˆ‘ä»¬æ­¦æ±‰ç»„å±€å§ï¼Œè¶…å¤šæ­¦æ±‰åŒåŸæ­å­é™ªä½ ä¸€èµ·ç©ï¼",
            "timestamp": [
                2024,
                4,
                15,
                15,
                41,
                47,
                612188000
            ],
            "type": "æ‹›å‹Ÿ",
            "tag": "[å¥½å‹,æœ€è¿‘]",
            "images": "[]",
            // 1713188968403, 1713189005327, 1713189007120
            "payment": null,
            "deadline": [
                2024,
                5,
                16,
                23,
                41,
                14
            ],
            "participantLimit": 6,
            "cutDown": null,
            "publisher": {
                "userImage": 1713188968403,
                "id": 1
            },
            "like": 0,
            "collect": 0,
            "participant": 0,
            "likeAlready": false,
            "collectAlready": false,
            "participantAlready": false,
            "commentList": null,
            "participantList": null
        }
    ]
}
loadgame(eventData);
// var eventData = JSON.parse(localStorage.getItem("data"));//è·å–eventData   
        function loadgame(eventData) {
            var serverUrl = "http://116.62.176.59:8080/xqlgq/files/";
            eventData.list.forEach(function (data) {
                var coordinates = [data.locationX, data.locationY];
                var markerContent;
                var imageURL = data.publisher.userImage;
                '<img src="' + imageURL + '" class="avatar-background-help">';

                markerContent = '<div class="custom-marker">' +
                    '<img src="' + imageURL + '" class="avatar-background-help">' + // å‘é€è¯·æ±‚è·å–ç”¨æˆ·å¤´åƒURL
                    '   <img src="https://i.postimg.cc/BZ1Vx7RL/2.png" class="avatar-help">' + // å®šä½å›¾æ ‡
                    '</div>';


                var marker = new AMap.Marker({
                    position: coordinates,
                    content: markerContent,
                    clickable: true,//å›¾æ ‡å¯ç‚¹å‡»
                    offset: new AMap.Pixel(0, 0),
                    eventID: data.gid,
                    eventUser: data.userId,
                    eventType: data.type,
                    eventTime: data.timestamp,
                    eventTitle: data.title,
                    eventContent: data.content,
                    eventImageList: data.images,
                    eventPayment: data.payment,
                    eventDeadline: data.deadline,
                    eventParticipantList: data.participantList,
                    eventLike: data.like
                });

                markers.push(marker);
                var infoMarkerContent;
                // åˆ›å»ºä¿¡æ¯æ¡†çš„å†…å®¹
                var truncatedContent = data.content.length > 20 ? data.content.substring(0, 20) + '...' : data.content;
                infoMarkerContent = '<div class="info-marker-game">';
                infoMarkerContent += '<div class="info-left-container-game">';
                infoMarkerContent += '<p class="event_title_game">' + data.title + '</p>'; // æ ‡é¢˜åœ¨æœ€ä¸Šé¢
                infoMarkerContent += '<div class="info-text-game">' + '<p>' + truncatedContent + '</p>' + '</div>';
                // æ£€æŸ¥æ˜¯å¦æœ‰å›¾ç‰‡å†…å®¹
                if (data.images && data.images.length > 2) {
                    // data.images && data.images.length > 2
                    // å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°ç»„
                    var dataImagesArray = JSON.parse(data.images);
                    // æå–ç´¢å¼•èŒƒå›´ä¸º 0 åˆ° 12 çš„å…ƒç´ ï¼Œå¹¶å°†å®ƒä»¬è¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²
                    var slicedString = dataImagesArray.slice(0, 1).join('');
                    var firstImageId = slicedString;
                    // æ‹¼æ¥ç¬¬ä¸€å¼ å›¾ç‰‡çš„å®Œæ•´é“¾æ¥
                    var firstImageUrl = serverUrl + firstImageId;
                    // console.log(firstImageUrl);
                    // firstImageUrl = "https://img95.699pic.com/photo/50133/0742.jpg_wh860.jpg";
                    // å°†ç¬¬ä¸€å¼ å›¾ç‰‡æ·»åŠ åˆ°ä¿¡æ¯æ¡†ä¸­
                    infoMarkerContent += '<div class="info-image">';
                    infoMarkerContent += '<img src="' + firstImageUrl + '">';
                    infoMarkerContent += '</div>';
                }
                else if (data.tag) {
                    var tagsString = JSON.stringify(data.tag);
                    // ç„¶åæˆ‘ä»¬éœ€è¦å°†è¿™ä¸ª JSON å­—ç¬¦ä¸²è§£æå›æ•°ç»„
                    var tagsArray = JSON.parse(tagsString);
                    infoMarkerContent += '<div class="info-tags">';
                    if (tagsArray.includes("å¥½å‹")) {
                        infoMarkerContent += '<p class="tag-friend">' + "å¥½å‹" + '</p>';
                    };
                    if (tagsArray.includes("æœ€è¿‘")) {
                        infoMarkerContent += '<p class="tag-game">' + "æœ€è¿‘" + '</p>';
                    }
                    if (tagsArray.includes("å¨±ä¹")) {
                        infoMarkerContent += '<p class="tag-game">' + "å¨±ä¹" + '</p>';
                    }
                    infoMarkerContent += '</div>';
                }
                infoMarkerContent += '</div>'; // å·¦ä¾§å®¹å™¨ç»“æŸ

                if (data.deadline && data.deadline.length > 2) {
                    
                    // æ·»åŠ å³ä¾§å®¹å™¨
                    infoMarkerContent += '<div class="info-right-container-game">';
                    infoMarkerContent += '<svg class="icon time-icon" aria-hidden="true">';
                    infoMarkerContent += '<use xlink:href="#icon-daojishi1"></use>';
                    infoMarkerContent += '</svg>';
                    // æ·»åŠ å€’è®¡æ—¶åˆ°ä¿¡æ¯æ¡†ä¸­
                    infoMarkerContent += '<p id="' + data.gid + '" class="countdown-time" ></p>';
                    infoMarkerContent += '</div>'; // å³ä¾§å®¹å™¨ç»“æŸ
                        var end = JSON.stringify(data.deadline);
                        var time = JSON.parse(end);
                        var year=parseInt((time[0]));
                        var month=parseInt((time[1]));
                        var day=parseInt((time[2]));
                        var hour=parseInt((time[3]));
                        var minute=parseInt((time[4]));
                        var dateParts = [year, month, day, hour, minute];
                        var date = new Date(dateParts[0], dateParts[1], dateParts[2], dateParts[3], dateParts[4], 0);
                        var endTime = date; // è·å–ç›®æ ‡çš„æ—¥æœŸå€¼ä¸ºï¼š2024/4/11 00:00:00;
                        setInterval(function () {
                            var now = new Date(); // è·å–å½“å‰æ—¶é—´
                            var diff = endTime.getTime() - now.getTime(); // è·å–è·ç¦»ç›®æ ‡æ—¶é—´çš„æ¯«ç§’æ•°
                            diff = parseInt(diff / 1000); // è½¬æ¢æˆç§’æ•°
                            var days = parseInt(diff / (24 * 3600)); // è·å–å¤©æ•°
                            var hours = parseInt(diff % (24 * 3600) / 3600); // è·å–å°æ—¶
                            var minutes = parseInt(diff % 3600 / 60); // è·å–åˆ†é’Ÿ
                            var seconds = diff % 60; // è·å–ç§’æ•°
    
                            // æ ¼å¼åŒ–æ˜¾ç¤ºå€’è®¡æ—¶
                            var countdownTime = formatTwoDigits(days) + ":" + formatTwoDigits(hours) + ":" + formatTwoDigits(minutes) + ":" + formatTwoDigits(seconds);
                            // æ›´æ–°å€’è®¡æ—¶æ˜¾ç¤º
                            document.getElementById(data.gid).textContent = countdownTime;
                        }, 1000); // åˆ·æ–°é—´éš”ä¸º1ç§’
    
                        // æ ¼å¼åŒ–æ•°å­—ä¸ºä¸¤ä½æ•°
                        function formatTwoDigits(num) {
                            return num < 10 ? "0" + num : num;
                        }
                        // ä¿¡æ¯æ¡†å†…å®¹ç»“æŸ
                    }
                    // ä¿¡æ¯æ¡†å†…å®¹ç»“æŸ
                infoMarkerContent += '</div>'; // ä¿¡æ¯æ¡†ç»“æŸ    
                // åˆ›å»ºä¿¡æ¯æ¡†çš„æ ‡è®°ï¼Œå¹¶æ·»åŠ åˆ°åœ°å›¾ä¸­
                var infoMarker = new AMap.Marker({
                    position: coordinates,
                    content: infoMarkerContent,
                    offset: new AMap.Pixel(40, 0), // ä½ç½®åç§»ä»¥æ˜¾ç¤ºåœ¨åŸæ ‡è®°ä¸Šæ–¹
                    eventID: data.gid,
                    zIndex: 1000, // ç¡®ä¿ä¿¡æ¯æ¡†åœ¨é¡¶å±‚
                    clickable: true, // ä½¿ä¿¡æ¯æ¡†ä¸å¯ç‚¹å‡»
                    relatedMarker: marker, // å°† marker å…³è”åˆ° infoMarker çš„è‡ªå®šä¹‰å±æ€§ relatedMarker ä¸­
                    flag: true,//è®°å½•infomarkerçš„æ˜¾ç¤ºæƒ…å†µ
                });

                infoMarker.flag = true;
                infoMarkers.push(infoMarker);
                // å°†åŸæ ‡è®°çš„æ ‡è®°æ·»åŠ åˆ°åœ°å›¾ä¸­

                infoMarker.on('touchend', function (e) {
                    // alert("aa");
                    // GoEvent(2);
                    var infoMarker = e.target;
                    var marker = infoMarker.relatedInfoMarker;
                    infoMarker.relatedMarker = marker;
                    console.log("go-event" + infoMarker._opts.eventID);
                    var eventID = parseInt(infoMarker._opts.eventID);
                    GoEvent(eventID);
                });;
                var startTime;
                marker.on('touchstart', function (e) {
                    startTime = new Date().getTime(); // è®°å½•è§¦æ‘¸å¼€å§‹æ—¶é—´
                });

                marker.on('touchend', function (e) {
                    var endTime = new Date().getTime(); // è®°å½•è§¦æ‘¸ç»“æŸæ—¶é—´
                    var duration = endTime - startTime; // è®¡ç®—è§¦æ‘¸æŒç»­æ—¶é—´
                    var marker = e.target;
                    var infoMarker = marker.infoMarker;
                    var flag = infoMarker.flag;


                    // å¦‚æœæŒç»­æ—¶é—´å°äº0.1ç§’ï¼Œåˆ™æ‰§è¡Œæ“ä½œ1
                    if (duration < 100) {
                        // æ‰§è¡Œæ“ä½œ1
                        console.log("æ”¶èµ·ä¿¡æ¯æ¡†" + marker._opts.eventID);

                        if (flag) {
                            // å¦‚æœinfoMarkerå·²ç»åœ¨åœ°å›¾ä¸Šï¼Œåˆ™éšè—å®ƒ
                            infoMarker.setMap(null);
                            infoMarker.flag = false;
                        } else {
                            // å¦‚æœinfoMarkerä¸åœ¨åœ°å›¾ä¸Šï¼Œåˆ™æ˜¾ç¤ºå®ƒ
                            infoMarker.setMap(map);
                            infoMarker.flag = true;
                        }
                    }
                    // å¦‚æœæŒç»­æ—¶é—´å¤§äº1ç§’ï¼Œåˆ™æ‰§è¡Œæ“ä½œ2
                    else if (duration > 500) {
                        // æ‰§è¡Œæ“ä½œ2
                        var eventUser = parseInt(marker._opts.eventUser);
                        GoUser(eventUser);
                        console.log("æ‰“å¼€ç”¨æˆ·ä¿¡æ¯" + marker._opts.eventUser);
                    }
                });

                marker.infoMarker = infoMarker;

            });
            map.add(markers);
            map.add(infoMarkers);
        }
    </script>
    <script type="text/javascript" src="https://gitee.com/dcloud/uni-app/raw/dev/dist/uni.webview.1.5.4.js"></script>
</body>

</html>